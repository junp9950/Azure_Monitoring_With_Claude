# Azure 백업 모니터링 웹 대시보드 🌐

**브라우저에서 실행되는 직관적인 Azure 백업 모니터링 대시보드**

명령줄 대신 웹 브라우저에서 아름다운 차트와 표로 백업 상태를 확인할 수 있습니다.

## 🆚 버전 비교

| 구분 | 명령줄 버전 | 웹 대시보드 버전 |
|------|------------|-----------------|
| **실행 방식** | 배치 파일 → 터미널 | 배치 파일 → 웹 브라우저 |
| **UI/UX** | 텍스트 출력 | 그래프, 차트, 테이블 |
| **상호작용** | 없음 | 계정 선택, 필터링, 다운로드 |
| **시각화** | 기본 텍스트 | 📊 차트, 📈 그래프, 🎨 색상 |
| **편의성** | 기본 | 높음 (클릭만으로 조회) |

## 🎯 주요 기능

### 📊 시각적 대시보드
- **실시간 차트**: 계정별 백업 작업 수, 상태 분포 파이차트
- **색상 구분**: 성공(초록), 실패(빨강), 진행중(노랑)
- **메트릭 카드**: 총 작업, 성공률, 실패 수, 오늘 실행 건수

### 🔧 사용자 친화적 제어
- **계정 선택**: 원하는 계정만 선택해서 조회
- **실시간 진행상황**: 프로그레스 바로 진행상황 표시
- **필터링**: 상태별, 계정별 필터링
- **자동 새로고침**: 30초마다 자동 업데이트 옵션

### 📥 데이터 관리
- **CSV 다운로드**: 조회 결과를 엑셀에서 열 수 있는 형태로 다운로드
- **상세 테이블**: 정렬, 검색 가능한 백업 작업 목록
- **실패 작업 하이라이트**: 문제가 있는 백업 별도 표시

## 🚀 빠른 시작

### 1단계: 실행

```bash
# 간단한 실행 (권장)
run_web_app.bat 더블클릭

# 또는 수동 실행
python -m streamlit run backup_monitor_web.py
```

### 2단계: 브라우저 접속

- 자동으로 브라우저가 열립니다
- 수동 접속: http://localhost:8501

### 3단계: 모니터링

1. **사이드바에서 계정 선택**
2. **"🚀 백업 상태 조회" 버튼 클릭**
3. **브라우저 팝업에서 Azure 로그인**
4. **결과 확인 및 분석**

## 💻 스크린샷 미리보기

```
┌─────────────────────────────────────────────────────────────┐
│  💾 Azure 백업 모니터링 대시보드                                │
├─────────────────┬───────────────────────────────────────────┤
│ 🔧 설정          │  📊 백업 모니터링 결과                       │
│                 │                                           │
│ 🏢 모니터링할     │  [총 작업: 35] [성공: 35] [실패: 0] [오늘: 5] │
│   계정 선택      │                                           │
│ ☑ NH_Parcel     │  📊 계정별 백업 작업 수    📈 백업 상태 분포    │
│ ☑ NH_TMS        │  ┌─────────────────┐   ┌─────────────────┐ │
│                 │  │                 │   │                 │ │
│ 🔄 자동 새로고침  │  │   [차트 영역]    │   │   [파이차트]     │ │
│   (30초)        │  │                 │   │                 │ │
│                 │  └─────────────────┘   └─────────────────┘ │
│ 🚀 백업 상태 조회  │                                           │
│                 │  📋 상세 백업 작업 목록                       │
│                 │  ┌─────────────────────────────────────────┐ │
│                 │  │ 계정명 │ Vault명 │ 상태 │ 시작시간 │ ... │ │
│                 │  ├─────────────────────────────────────────┤ │
│                 │  │ NH_TMS │ RSV-01  │ ✅   │ 03:02   │ ... │ │
│                 │  └─────────────────────────────────────────┘ │
└─────────────────┴───────────────────────────────────────────┘
```

## 🔧 설치 및 설정

### 사전 요구사항

```bash
# Python 3.8 이상
python --version

# 필요한 패키지 설치
pip install -r requirements_web.txt
```

### 설정 파일

기존 `accounts_config.json` 파일을 그대로 사용합니다:

```json
{
  "accounts": [
    {
      "name": "NH_Logistics_Parcel",
      "tenant_id": "your-tenant-id",
      "subscription_id": "your-subscription-id",
      "description": "택배 시스템"
    }
  ]
}
```

## 🎨 UI 구성 요소

### 메인 대시보드
- **제목 바**: 애플리케이션 이름과 상태
- **메트릭 카드**: 4개의 주요 지표 (총 작업, 성공, 실패, 오늘 실행)
- **차트 영역**: 2개의 인터랙티브 차트

### 사이드바
- **계정 선택**: 멀티셀렉트 박스
- **자동 새로고침**: 체크박스
- **실행 버튼**: 기본 액션 버튼

### 데이터 테이블
- **필터링**: 상태별, 계정별 필터
- **색상 구분**: 상태에 따른 행 배경색
- **정렬**: 컬럼 클릭으로 정렬
- **다운로드**: CSV 내보내기

## 🔍 고급 기능

### 자동 새로고침
```python
# 30초마다 자동으로 데이터 갱신
auto_refresh = st.sidebar.checkbox("🔄 자동 새로고침 (30초)")
```

### 데이터 캐싱
```python
# 설정 파일은 캐시되어 빠른 로딩
@st.cache_data
def load_accounts_config():
    ...
```

### 세션 상태 관리
```python
# 조회 결과는 세션에 저장되어 페이지 새로고침 시에도 유지
st.session_state['backup_jobs'] = all_jobs
```

## 🎭 사용 시나리오

### 일일 모니터링
1. 오전에 웹 대시보드 실행
2. 모든 계정 선택하여 조회
3. 실패한 백업이 있는지 차트로 확인
4. 문제가 있으면 상세 테이블에서 세부 정보 확인

### 특정 계정 집중 모니터링
1. 문제가 있는 계정만 선택
2. 자동 새로고침 활성화
3. 실시간으로 상태 변화 관찰

### 리포트 생성
1. 모든 계정 조회 후 결과 확인
2. CSV 다운로드
3. 엑셀에서 추가 분석 및 리포트 작성

## 🛠️ 문제 해결

### 포트 충돌
```bash
# 다른 포트 사용
streamlit run backup_monitor_web.py --server.port 8502
```

### 패키지 설치 오류
```bash
# 개별 설치
pip install streamlit
pip install plotly
pip install pandas
```

### 브라우저가 자동으로 열리지 않음
- 수동으로 http://localhost:8501 접속
- 방화벽 설정 확인

### 차트가 표시되지 않음
- Plotly 패키지 재설치: `pip install --upgrade plotly`
- 브라우저 캐시 삭제

## 🔒 보안 고려사항

### 로컬 실행만
- 웹 대시보드는 로컬(localhost)에서만 접근 가능
- 외부 네트워크에서 접근 불가

### 인증 정보
- Azure 인증은 기존 방식과 동일 (브라우저 팝업)
- 설정 파일에 민감 정보 저장하지 않음

### 데이터 보안
- 모든 데이터는 메모리에만 저장
- 웹 서버 종료 시 모든 데이터 삭제

## 🌟 향후 개선 계획

- [ ] **알림 기능**: 실패한 백업 발생 시 이메일/Slack 알림
- [ ] **히스토리**: 과거 백업 이력 추적 및 트렌드 분석
- [ ] **실시간 모니터링**: WebSocket을 이용한 실시간 업데이트
- [ ] **다크 모드**: 야간 모니터링을 위한 다크 테마
- [ ] **모바일 최적화**: 스마트폰에서도 사용 가능한 반응형 디자인

## 📞 지원

문제가 발생하거나 개선 제안이 있으시면:

1. **로그 확인**: 터미널에 출력되는 오류 메시지 확인
2. **브라우저 개발자 도구**: F12 → Console 탭에서 오류 확인
3. **설정 파일 검증**: accounts_config.json 형식 확인

---

**즐거운 백업 모니터링 되세요! 🎉**