# Azure 백업 모니터링 자동화 시스템

클라우드 엔지니어를 위한 멀티 계정 백업 상태 자동 모니터링 도구입니다.

## 📋 주요 기능

- **멀티 계정 지원**: 여러 Azure 계정의 백업 상태를 한 번에 확인
- **자동화 실행**: 수동 입력 없이 모든 계정 자동 순회
- **상세 리포트**: 계정별 백업 성공/실패 통계 제공
- **오류 처리**: 특정 계정 오류 시에도 다른 계정 계속 처리
- **로그 관리**: 실행 결과를 날짜별 로그 파일로 저장

## 🚀 사용 방법

### 1. 계정 설정

`accounts_config.json` 파일을 편집하여 모니터링할 계정들을 추가하세요:

```json
{
  "accounts": [
    {
      "name": "메인 계정",
      "tenant_id": "your-tenant-id-1",
      "subscription_id": "your-subscription-id-1",
      "description": "기본 운영 계정"
    },
    {
      "name": "개발 계정",
      "tenant_id": "your-tenant-id-2",
      "subscription_id": "your-subscription-id-2",
      "description": "개발 환경 계정"
    }
  ]
}
```

### 2. 실행 방법

**방법 1: 배치 파일 실행 (추천)**
```
run_backup_check.bat 더블클릭
```

**방법 2: 명령줄 실행**
```bash
python backup_monitor_auto.py
```

### 3. 결과 확인

실행 후 다음 정보를 확인할 수 있습니다:
- 계정별 백업 작업 통계
- 실패한 백업 작업 목록
- 오늘 실행된 백업 작업 현황
- 상세 로그 파일

## 📊 출력 결과 예시

```
================================================================================
                       백업 모니터링 요약 결과
================================================================================

[메인 계정]
  총 백업 작업: 21개
  성공: 21개
  실패: 0개

[개발 계정]
  총 백업 작업: 14개
  성공: 13개
  실패: 1개

🚨 실패한 백업 작업 (1개):
  - 개발 계정 | DEV-RSV-01 | Failed | 2025-07-17 03:05:00

📅 오늘 실행된 백업 작업 (8개):
  ✅ 메인 계정 | PROD-RSV-01 | 2025-07-17 03:01:00
  ✅ 메인 계정 | PROD-RSV-02 | 2025-07-17 03:02:00
  ❌ 개발 계정 | DEV-RSV-01 | 2025-07-17 03:05:00
```

## 📁 생성되는 파일

- `backup_monitor_YYYYMMDD.log`: 날짜별 실행 로그
- 화면 출력: 요약 통계 및 실시간 진행 상황

## 🔧 문제 해결

### 인증 오류
- 브라우저 로그인 창에서 정상적으로 로그인했는지 확인
- 해당 계정에 Recovery Services Vault 읽기 권한이 있는지 확인

### 설정 파일 오류
- `accounts_config.json` 파일 형식이 올바른지 확인
- tenant_id와 subscription_id가 정확한지 확인

### 패키지 오류
```bash
pip install azure-identity azure-mgmt-recoveryservicesbackup
```

## 💡 팁

1. **계정 추가**: 새 계정은 `accounts_config.json`에 추가하기만 하면 됩니다
2. **로그 확인**: 상세한 오류 정보는 로그 파일에서 확인할 수 있습니다
3. **성능**: 계정이 많을 경우 실행 시간이 길어질 수 있습니다
4. **권한**: Reader 권한만 있으면 모든 기능이 동작합니다

## 🔮 향후 개선 사항

- [ ] 스케줄링 기능 (작업 스케줄러 연동)
- [ ] 이메일 알림 기능
- [ ] 웹 대시보드 제공
- [ ] 백업 정책 준수 체크
- [ ] Excel 리포트 생성

---

**문의사항이나 개선 제안이 있으시면 언제든지 말씀해 주세요!**